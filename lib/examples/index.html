<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='UTF-8'>
	<title>GunDB Application</title>
	<style>
		body {
			font-family: sans-serif;
			color: #303438;
			text-align: center;
		}
	</style>
</head>
<body>

	<h1>Hello world gun app</h1>
	<p>Open your web console</p>

	<!-- Loads gun -->
	<script src='/gun/gun.js'></script>
    <script src='/gun/lib/path.js'></script>
    
	<script>
	(function () {

		// Sync this gun instance with the server.
		var gun = Gun([
			`http://localhost:${location.port}/gun`,
		]);

		// Reads key 'data'.
		var data = gun.get('data');

		// Exposed so the JS console can see it.
		window.data = data;

		console.log('Gun reference exposed as %cwindow.data', 'color: red');

		// Writes a value to the key 'data'.
		data.put({ message: 'Hello world!' });

		var count = 0;

		// Listen for real-time change events.
		data.path('message').on(function (message) {
			count++;

			console.log(`Message(${count}):`, message);
		});

	}())
	</script>
</body>
</html>
